{"ast":null,"code":"import { call, all, takeLatest, put, select } from 'redux-saga/effects';\nimport api from '../../../services/api';\nimport { getTodosSuccess, removeTodoSuccess } from './actions';\nimport { TodoTypes } from './types';\nimport { uuid } from 'uuidv4';\n\nfunction* getTodos() {\n  //const todosData = localStorage.getItem(\"todoList\")\n\n  /*const mock = [\n    {\n        id: uuid(),\n        message: \"Teste 1\",\n        done: false\n    },\n    {\n        id: uuid(),\n        message: \"Teste 2\",\n        done: false\n    }\n    ]\n    */\n  const todoData = yield call(api.get, '');\n  yield put(getTodosSuccess(todoData));\n}\n\nfunction* addTodo({\n  payload\n}) {\n  const todos = yield select(state => state.todo.todos);\n  const newTodo = {\n    _id: uuid(),\n    message: payload.message,\n    done: false\n  };\n  const updatedTodos = [newTodo, ...todos];\n  yield put(getTodosSuccess(updatedTodos));\n}\n\nfunction* removeTodo({\n  payload\n}) {\n  const todos = yield select(state => state.todo.todos);\n  const updatedTodos = todos.filter(todo => todo._id !== payload.id);\n  console.log(payload);\n  yield put(removeTodoSuccess(updatedTodos));\n}\n\nfunction* changeTodo({\n  payload\n}) {\n  const todos = yield select(state => state.todo.todos);\n  const updatedTodos = todos.map(todo => ({ ...todo,\n    done: todo._id == payload.id ? !todo.done : todo.done\n  }));\n  yield put(getTodosSuccess(updatedTodos));\n}\n\nexport default all([takeLatest(TodoTypes.GET_TODOS_REQUEST, getTodos), takeLatest(TodoTypes.REMOVE_TODO_REQUEST, removeTodo), takeLatest(TodoTypes.CHANGE_TODO_REQUEST, changeTodo), takeLatest(TodoTypes.ADD_TODO_REQUEST, addTodo)]);","map":{"version":3,"sources":["/home/beatriz/Documents/bootcamp/real2u_sagasredux/src/store/modules/todo/sagas.tsx"],"names":["call","all","takeLatest","put","select","api","getTodosSuccess","removeTodoSuccess","TodoTypes","uuid","getTodos","todoData","get","addTodo","payload","todos","state","todo","newTodo","_id","message","done","updatedTodos","removeTodo","filter","id","console","log","changeTodo","map","GET_TODOS_REQUEST","REMOVE_TODO_REQUEST","CHANGE_TODO_REQUEST","ADD_TODO_REQUEST"],"mappings":"AAAA,SAASA,IAAT,EAAeC,GAAf,EAAoBC,UAApB,EAAgCC,GAAhC,EAAqCC,MAArC,QAAmD,oBAAnD;AACA,OAAOC,GAAP,MAAgB,uBAAhB;AAEA,SAASC,eAAT,EAA0BC,iBAA1B,QAAkD,WAAlD;AAKA,SAASC,SAAT,QAAoC,SAApC;AACA,SAASC,IAAT,QAAqB,QAArB;;AAEA,UAAUC,QAAV,GAAqB;AACnB;;AACA;;;;;;;;;;;;;AAaE,QAAMC,QAAQ,GAAG,MAAMX,IAAI,CAACK,GAAG,CAACO,GAAL,EAAU,EAAV,CAA3B;AACA,QAAMT,GAAG,CAACG,eAAe,CAACK,QAAD,CAAhB,CAAT;AACH;;AAED,UAAUE,OAAV,CAAkB;AAACC,EAAAA;AAAD,CAAlB,EAAuC;AACnC,QAAMC,KAAK,GAAG,MAAMX,MAAM,CAAEY,KAAD,IAA6BA,KAAK,CAACC,IAAN,CAAWF,KAAzC,CAA1B;AACA,QAAMG,OAAO,GAAG;AACZC,IAAAA,GAAG,EAAEV,IAAI,EADG;AAEZW,IAAAA,OAAO,EAAEN,OAAO,CAACM,OAFL;AAGZC,IAAAA,IAAI,EAAE;AAHM,GAAhB;AAMA,QAAMC,YAAY,GAAG,CAACJ,OAAD,EAAU,GAAGH,KAAb,CAArB;AACA,QAAMZ,GAAG,CAACG,eAAe,CAACgB,YAAD,CAAhB,CAAT;AACH;;AAED,UAAUC,UAAV,CAAqB;AAAET,EAAAA;AAAF,CAArB,EAA6C;AAC3C,QAAMC,KAAK,GAAG,MAAMX,MAAM,CAAEY,KAAD,IAA6BA,KAAK,CAACC,IAAN,CAAWF,KAAzC,CAA1B;AAEA,QAAMO,YAAY,GAAGP,KAAK,CAACS,MAAN,CAAcP,IAAD,IAAoBA,IAAI,CAACE,GAAL,KAAaL,OAAO,CAACW,EAAtD,CAArB;AAEAC,EAAAA,OAAO,CAACC,GAAR,CAAYb,OAAZ;AAEA,QAAMX,GAAG,CAACI,iBAAiB,CAACe,YAAD,CAAlB,CAAT;AACD;;AAED,UAAUM,UAAV,CAAqB;AAAEd,EAAAA;AAAF,CAArB,EAA6C;AACzC,QAAMC,KAAK,GAAG,MAAMX,MAAM,CAAEY,KAAD,IAA6BA,KAAK,CAACC,IAAN,CAAWF,KAAzC,CAA1B;AACA,QAAMO,YAAY,GAAGP,KAAK,CAACc,GAAN,CAAWZ,IAAD,KAC1B,EAAC,GAAGA,IAAJ;AAAUI,IAAAA,IAAI,EAAEJ,IAAI,CAACE,GAAL,IAAUL,OAAO,CAACW,EAAlB,GAAsB,CAACR,IAAI,CAACI,IAA5B,GAAmCJ,IAAI,CAACI;AAAxD,GAD0B,CAAV,CAArB;AAMA,QAAMlB,GAAG,CAACG,eAAe,CAACgB,YAAD,CAAhB,CAAT;AACD;;AAEH,eAAerB,GAAG,CAAC,CACjBC,UAAU,CAACM,SAAS,CAACsB,iBAAX,EAA8BpB,QAA9B,CADO,EAEjBR,UAAU,CAACM,SAAS,CAACuB,mBAAX,EAAgCR,UAAhC,CAFO,EAGjBrB,UAAU,CAACM,SAAS,CAACwB,mBAAX,EAAgCJ,UAAhC,CAHO,EAIjB1B,UAAU,CAACM,SAAS,CAACyB,gBAAX,EAA6BpB,OAA7B,CAJO,CAAD,CAAlB","sourcesContent":["import { call, all, takeLatest, put, select } from 'redux-saga/effects'\nimport api from '../../../services/api'\n\nimport { getTodosSuccess, removeTodoSuccess} from './actions'\nimport { AnyAction } from 'redux'\n\nimport { ApplicationState } from '../../index'\n\nimport { TodoTypes, TodoData } from './types'\nimport { uuid } from 'uuidv4'\n\nfunction* getTodos() {\n  //const todosData = localStorage.getItem(\"todoList\")\n  /*const mock = [\n    {\n        id: uuid(),\n        message: \"Teste 1\",\n        done: false\n    },\n    {\n        id: uuid(),\n        message: \"Teste 2\",\n        done: false\n    }\n    ]\n    */\n    const todoData = yield call(api.get, '')\n    yield put(getTodosSuccess(todoData))\n}\n\nfunction* addTodo({payload}: AnyAction){\n    const todos = yield select((state: ApplicationState) => state.todo.todos)\n    const newTodo = {\n        _id: uuid(),\n        message: payload.message,\n        done: false\n    }\n\n    const updatedTodos = [newTodo, ...todos]\n    yield put(getTodosSuccess(updatedTodos))\n}\n\nfunction* removeTodo({ payload }: AnyAction) {\n  const todos = yield select((state: ApplicationState) => state.todo.todos)\n\n  const updatedTodos = todos.filter((todo: TodoData) => todo._id !== payload.id)\n\n  console.log(payload)\n\n  yield put(removeTodoSuccess(updatedTodos))\n}\n\nfunction* changeTodo({ payload }: AnyAction) {\n    const todos = yield select((state: ApplicationState) => state.todo.todos)\n    const updatedTodos = todos.map((todo: TodoData) =>\n        ({...todo, done: todo._id==payload.id?(!todo.done):(todo.done)})\n\n    )\n\n  \n    yield put(getTodosSuccess(updatedTodos))\n  }\n\nexport default all([\n  takeLatest(TodoTypes.GET_TODOS_REQUEST, getTodos),\n  takeLatest(TodoTypes.REMOVE_TODO_REQUEST, removeTodo),\n  takeLatest(TodoTypes.CHANGE_TODO_REQUEST, changeTodo),\n  takeLatest(TodoTypes.ADD_TODO_REQUEST, addTodo),\n])"]},"metadata":{},"sourceType":"module"}